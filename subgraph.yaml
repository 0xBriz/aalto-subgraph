specVersion: 0.0.2
description: Balancer is a non-custodial portfolio manager, liquidity provider, and price sensor.
repository: https://github.com/balancer-labs/balancer-subgraph
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Vault 
    network: ganache 
    source:
      address: "0x4e59b44847b379578588920ca78fbf26c0b4956c"
      abi: Vault
      startBlock: 1
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/vault.ts
      entities:
        - Balancer
      abis:
        - name: Vault
          file: ./abis/Vault.json
      eventHandlers:
        - event: PoolCreated(bytes32)
          handler: handleNewPool
      #callHandlers:
        #- function: setPoolController
          #handler: handleSetPoolController
templates:
  - kind: ethereum/contract
    name: PoolController
    network: ganache
    source:
      abi: FixedSetPoolTokenizer
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/poolController.ts
      entities:
        - FixedSetPoolTokenizer
        - BToken
      abis:
        - name: FixedSetPoolTokenizer
          file: ./abis/FixedSetPoolTokenizer.json
        - name: BToken
          file: ./abis/BToken.json
      #eventHandlers:
        #- event: Transfer(indexed address,indexed address,uint256)
          #handler: handleTransfer
      callHandlers:
        - function: joinPool(uint256, uint128[], bool, address)
          handler: handleJoinPool
        - function: exitPool(uint256, uint256[], bool, address)
          handler: handleExitPool
